<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update student</title>

    <link rel="stylesheet" href="test.css">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
  
   
</head>
<body class="bg" onload="tableEdit()">
   

    <div class="my-4 container sticky-top" >

        <div class="row">
            <div class="col-3"> </div>
     
            <div class="col-6">
         <nav class=" navbar rounded navbar-expand-xl navbar-light  " style="background-color: #A6430A; ">
             <a class="navbar-brand" style="color: #F24968" href="#"> J&L </a>
             <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" 
             aria-expanded="false" aria-label="Toggle navigation">
               <span class="navbar-toggler-icon"></span>
             </button>
             <div class="collapse navbar-collapse" id="navbarNav">
               <ul class="navbar-nav">
                 <li class="nav-item ">
                   <a class="nav-link  " style="color: #D9D9D9; " href="index.html">Home </a>
                 </li>
                 <li class="nav-item dropdown">
                   <a class="nav-link dropdown-toggle "  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="course" style="color: #D9D9D9" href="#">Courses</a>
                   <div class="dropdown-menu rounded" aria-labelledby="course" style="background-color: #A6430A; ">
                    <a class="dropdown-item" style="color: #D9D9D9" href="Cadd.html">Add</a>
                    <a class="dropdown-item" style="color: #D9D9D9" href="Cedit.html">Edit</a>
                    <a class="dropdown-item" style="color: #D9D9D9" href="Cupdate.html">Update</a>
                    <a class="dropdown-item"  style="color: #D9D9D9" href="TperC.html">Add trainer</a>
                    <a class="dropdown-item" style="color: #D9D9D9" href="SperC.html">Add student</a>
                    <a class="dropdown-item" style="color: #D9D9D9"  href="AperC.html">Add Assignment</a>
                    <a class="dropdown-item" style="color: #D9D9D9" href="TperCupdate.html">Add trainer update</a>
                    <a class="dropdown-item" style="color: #D9D9D9" href="SperCupdate.html">Add student update</a>
                    <a class="dropdown-item" style="color: #D9D9D9" href="AperSperC.html">assignments per students per course</a>
                    <a class="dropdown-item" style="color: #D9D9D9" href="AperCperS.html">assignments per course per student</a>
                   </div>
                 </li>
                 <li class="nav-item dropdown ">
                   <a class="nav-link dropdown-toggle"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="trainer" style="color: #D9D9D9" href="#">Trainers</a>
                   <div class="dropdown-menu rounded" aria-labelledby="trainer" style="background-color: #A6430A; ">
                     <a class="dropdown-item " style="color: #D9D9D9" href="Tadd.html">Add</a>
                     <a class="dropdown-item" style="color: #D9D9D9" href="Tedit.html">Edit</a>
                     <a class="dropdown-item" style="color: #D9D9D9" href="#">Update</a>
                   </div>
                 </li>
                 <li class="nav-item dropdown">
                   <a class="nav-link dropdown-toggle active"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="student" style="color:#D98E04" href="#">Students</a>
                   <div class="dropdown-menu rounded" aria-labelledby="student" style="background-color: #A6430A; ">
                     <a class="dropdown-item" style="color: #D9D9D9" href="Sadd.html">Add</a>
                     <a class="dropdown-item" style="color: #D98E04" href="Sedit.html">Edit</a>
                     <a class="dropdown-item" style="color: #D9D9D9" href="#">Update</a>
                   </div>
                 </li> 
                 <li class="nav-item dropdown">
                     <a class="nav-link dropdown-toggle"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" id="as" style="color: #D9D9D9" href="#">Assignments</a>
                     <div class="dropdown-menu rounded" aria-labelledby="as" style="background-color: #A6430A; ">
                         <a class="dropdown-item" style="color: #D9D9D9" href="#">Add</a>
                         <a class="dropdown-item" style="color: #D9D9D9" href="#">Edit</a>
                         <a class="dropdown-item" style="color: #D9D9D9" href="#">Update</a>
                       </div>
                   </li>
               </ul>
             </div>
           </nav>
         </div>
     
     
           <div class="col-3"></div>
     
         </div>
         </div>


<div class="container">

<form>

  <div class="form-group">
    <label for="first_name">First Name</label>
    <input type="text" class="border rounded ta" id="first_name" placeholder="first name"  >
</div>

<div class="form-group">
    <label for="last_name">Last Name</label>
    <input type="text" class=" border rounded ta" id="last_name" placeholder="last name"  >
</div>


<div class="form-group row">
    <label for="dOB">Date of birth</label>
    <input type="date" class="mx-2 border rounded ta" id="dOB"   >
</div>

<div class="form-group">
    <label for="cost">Tution Fees</label>
    <input type="number" class=" border rounded ta" id="cost" placeholder="Tution Fees"  >
</div>

   

    <input type="reset"  class="btn btn-primary" id="btnId" value="Update student" onclick="Update()">

</form>

</div>

<br>

<div class="container" >

  <table class="table" id="table">
      <thead>
        <tr>
          
          <th scope="col">First name</th>
          <th scope="col">Last Name</th>            
          <th scope="col">Date of Birth</th>
          <th scope="col">Tution Fees</th>
        </tr>
      </thead>
      <tbody>
        <tr>
         
          <td>Kostas</td>
          <td>Mixas</td>
          <td>2000-05-05</td>
          <td>computer scince</td>
          
        </tr>
       
        
      </tbody>
    </table>

</div>

<script>
    var editRow = null;
    var cols;
  
  function display(ctl) {
    editRow = $(ctl).parents("tr");
   
     cols = editRow.children("td");
  
    $("#first_name").val($(cols[0]).text());
     
    
    $("#last_name").val($(cols[1]).text());
   
    
   

      

        $("#dOB").val($(cols[2]).text());
        $("#cost").val($(cols[3]).text());
        
    
    
  
  
  }
  
  function Update() {
   
    $(editRow).remove();
  
    
    let firstName=$(cols[0]).text();
    let lastName=$(cols[1]).text();
    let dOB=$(cols[2]).text();

    let cost=$(cols[3]).text();
    
  



    let dataLoc
    
  
  if(localStorage.getItem('students')){
    dataLoc=JSON.parse(localStorage.getItem('students'));
  }
  else{
    dataLoc=[]
  }
  
   //dataG = localStorage.getItem('row') ? JSON.parse(localStorage.getItem('row')) : [];
  
   dataLoc[0]=0;
  
 
   let i;
    let a=1;
    let b=2;
    let c=3;
    let d=4;
    

    let trLen=dataLoc.length-1
    let datLocLEN=trLen/4;
    for (i = 1; i <= datLocLEN; i++) {
      let t=dataLoc[a]  
    let st=dataLoc[b]
    let ty= dataLoc[c]
    
  
if(firstName==t && lastName==st && dOB==ty){
  dataLoc.splice(a,1)
  dataLoc.splice(a,1)
  dataLoc.splice(a,1)
  dataLoc.splice(a,1)
  
}
    a=a+4;
    b=b+4;
    c=c+4;
    d=d+4;
    

}   
  
  
      let firstNameNew= document.getElementById('first_name').value;  
      let lastNameNew= document.getElementById('last_name').value;
      let dOBNew=document.getElementById('dOB').value;

      let costNew=document.getElementById('cost').value;
  


      let now=new Date();
      let tem=new Date(dOBNew)

        if(tem>now){
          dOBNew="";
            alert("you can't set date of birth this year or after!!!");

        }
 
      if(!firstNameNew || !lastNameNew ||  dOBNew==="" ) {
          alert('You must fill all the fields!!!');
      }
      else if(cost<0){
        
        alert('cost cant be negative');
      }
      else{
        let table = document.getElementById('table').getElementsByTagName('tbody')[0];
    
    let newRow = table.insertRow();

    let firstNameCell = newRow.insertCell(0);
    let lastNameCell = newRow.insertCell(1);
    
    let dOBDCell =newRow.insertCell(2);
    let costCell =newRow.insertCell(3);

      let deleteCell=newRow.insertCell(4);
  
      let firstNameNode = document.createTextNode(firstName);
        let lastNameNode = document.createTextNode(lastName);

        let dOBNode =document.createTextNode(dOB);
        let costNode =document.createTextNode(cost);
    

      let deleteNode=document.createElement('button')
      let editNode=document.createTextNode('Edit');   
  
  
      firstNameCell.append(firstNameNode);
        lastNameCell.append(lastNameNode);

        dOBDCell.append(dOBNode);

        costCell.append(costNode);
  
      deleteNode.appendChild(editNode);
      
  
      deleteCell.append(deleteNode);
  
      deleteNode.classList.add("btn")
      deleteNode.classList.add("btn-primary");
      deleteNode.setAttribute("onclick","display(this)")
         
      
      dataLoc.push(firstName);
      dataLoc.push(lastName);

      dataLoc.push(dOB);

      dataLoc.push(cost);
            
  
          localStorage.setItem('students',JSON.stringify(dataLoc));
           
          
  
         
      }
      
   
  
     
      }
  
      
  </script>

<script src="Sadd.js"></script>
</body>
</html>